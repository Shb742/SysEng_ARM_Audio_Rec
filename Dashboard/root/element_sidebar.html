<script src="js/sb-admin-2.min.js"></script>
<script>
    function logout(){
        var newXhr = $.getJSON("/logout")
            .done(function (json) {
                window.location.replace("/login");
            })
            .fail(function (err) {
                window.location.replace("/login");
            });
    }
    switch (window.location.pathname) {
        case ('/'):
            document.getElementById('homeSidebarButton').classList.add('active');
            break;
        case ('/alerts'):
            document.getElementById('alertsSidebarButton').classList.add('active');
            break;
        case ('/users'):
            document.getElementById('usersSidebarButton').classList.add('active');
            break;
        case ('/devices'):
            document.getElementById('deviceSidebarButton').classList.add('active');
            break;
        default:
            break;
    }
    $.getJSON('/ping').done((json) => {
        document.getElementById('logInSidebarButton').style.display = 'none';
        document.getElementById('logOutSidebarButton').style.display = 'initial';
    }).fail(() => {
        document.getElementById('logInSidebarButton').style.display = 'initial';
        document.getElementById('logOutSidebarButton').style.display = 'none';
        document.getElementById('sideBarPageButtons').style.display = 'none';
        //if (document.getElementById('404') == null) window.location.replace('/login');
    });
</script>

<a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
    <div class="sidebar-brand-icon">
        <i class="fas fa-tachometer-alt"></i>
    </div>
    <div class="sidebar-brand-text mx-3">Dashboard</div>
</a>

<hr class="sidebar-divider my-0">

<li class="nav-item" id="homeSidebarButton">
    <a class="nav-link" href="/">
        <i class="fas fa-fw fa-home"></i>
        <span>Home</span>
    </a>
</li>

<li class="nav-item" style="display: none;" id="logInSidebarButton">
    <a class="nav-link" href="login">
        <i class="fas fa-fw fa-sign-in-alt"></i>
        <span>Sign in</span>
    </a>
</li>

<li class="nav-item" style="display: none;" id="logOutSidebarButton">
    <a class="nav-link" onclick="logout();">
        <i class="fas fa-fw fa-sign-out-alt"></i>
        <span>Sign out</span>
    </a>
</li>
<div id="sideBarPageButtons">
    <hr class="sidebar-divider">


    <div class="sidebar-heading">View Data</div>

    <li class="nav-item" id="alertsSidebarButton">
        <a class="nav-link" href="alerts">
            <i class="fas fa-fw fa-bell" id="alertsSidebarIcon"></i>
            <span>Alerts</span>
        </a>
    </li>

    <li class="nav-item" id="usersSidebarButton">
        <a class="nav-link" href="users">
            <i class="fas fa-fw fa-users"></i>
            <span>Users</span>
        </a>
    </li>

    <li class="nav-item" id="deviceSidebarButton">
        <a class="nav-link" href="devices">
            <i class="fas fa-fw fa-tablet"></i>
            <span>Devices</span>
        </a>
    </li>

    <!--<hr class="sidebar-divider">

    <div class="sidebar-heading">More</div>

    <li class="nav-item" id="settingsSidebarButton">
        <a class="nav-link" href="settings">
            <i class="fas fa-fw fa-cog"></i>
            <span>Settings</span>
        </a>
    </li>-->

    <!--<li class="nav-item" id="toolsSidebarButton">
        <a class="nav-link" href="tools.html">
            <i class="fas fa-fw fa-tools"></i>
            <span>Tools</span>
        </a>
    </li>-->
</div>
<hr class="sidebar-divider d-none d-md-block">

<div class="text-center d-none d-md-inline">
    <button class="rounded-circle border-0" id="sidebarToggle"></button>
</div>